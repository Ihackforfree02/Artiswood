<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Trending Decks | Clash Royale</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #1a1a1a, #3a3a3a);
      color: #fff;
    }
    nav {
      background-color: #111;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 0 10px #ff6600;
    }
    nav a {
      color: #ff6600;
      margin: 0 1rem;
      text-decoration: none;
      font-weight: bold;
    }
    header {
      text-align: center;
      padding: 4rem 2rem 2rem;
    }
    header h1 {
      font-size: 3rem;
      color: #ff6600;
    }
    .content {
      max-width: 1000px;
      margin: auto;
      padding: 2rem;
    }
    .deck, .trending, .evos {
      background-color: #2c2c2c;
      padding: 1rem;
      margin-bottom: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px #ff6600;
    }
    .deck h3, .trending h3, .evos h3 {
      color: #ff6600;
    }
    .cards {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 1rem;
    }
    .cards img {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      border: 2px solid #ff6600;
    }
    .meta {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: #ccc;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="#">Trending Decks</a>
  </nav>

  <header>
    <h1>Trending Decks</h1>
    <p>ðŸ”¥ Vote for your favorite decks and explore top cards + evolutions</p>
  </header>

  <div class="content">
    <div id="trendingContainer"></div>
    <div id="trendingCards" class="trending"></div>
    <div id="evoCards" class="evos"></div>
  </div>

  <script>
    const trendingDecks = [
      {
        name: "Miner Control",
        cards: ["Miner", "Poison", "Wall Breakers", "Bomb Tower", "Bats", "Log", "Skeletons", "Ice Spirit"],
        bestCards: ["Miner", "Poison"],
        evos: ["Miner", "Wall Breakers"]
      },
      {
        name: "Royal Giant Cycle",
        cards: ["Royal Giant", "Fisherman", "Hunter", "Log", "Skeletons", "Ice Spirit", "Cannon", "Fireball"],
        bestCards: ["Royal Giant", "Hunter"],
        evos: ["Royal Giant"]
      }
    ];

    function getCardImage(cardName) {
      const formatted = cardName.toLowerCase().replace(/[\s\.']/g, '-');
      return `https://royaleapi.com/images/cards/${formatted}.png`;
    }

    function renderTrendingDecks() {
      const container = document.getElementById('trendingContainer');
      container.innerHTML = '<h3>Trending Decks</h3>';

      trendingDecks.forEach(deck => {
        const deckDiv = document.createElement('div');
        deckDiv.className = 'deck';
        deckDiv.innerHTML = `
          <h3>${deck.name}</h3>
          <div class="cards">
            ${deck.cards.map(card => `<img src="${getCardImage(card)}" alt="${card}" title="${card}"/>`).join('')}
          </div>
          <div class="meta">Top Cards: ${deck.bestCards.join(', ')}</div>
        `;
        container.appendChild(deckDiv);
      });
    }

    function renderTrendingCards() {
      const cardFrequency = {};

      trendingDecks.forEach(deck => {
        deck.cards.forEach(card => {
          cardFrequency[card] = (cardFrequency[card] || 0) + 1;
        });
      });

      const sortedCards = Object.entries(cardFrequency)
        .sort((a, b) => b[1] - a[1])
        .map(entry => entry[0]);

      const container = document.getElementById('trendingCards');
      container.innerHTML = `
        <h3>ðŸ”¥ Most Trending Cards (Usage Across Decks)</h3>
        <div class="cards">
          ${sortedCards.map(card => `<img src="${getCardImage(card)}" alt="${card}" title="${card}"/>`).join('')}
        </div>
      `;
    }

    function renderEvoCards() {
      const evoSet = new Set();

      trendingDecks.forEach(deck => {
        if (deck.evos && Array.isArray(deck.evos)) {
          deck.evos.forEach(evo => evoSet.add(evo));
        }
      });

      const evoList = Array.from(evoSet);

      const container = document.getElementById('evoCards');
      container.innerHTML = `
        <h3>âœ¨ Evolution Cards</h3>
        <div class="cards">
          ${evoList.map(card => `<img src="${getCardImage(card)}" alt="${card}" title="${card} (Evolution)"/>`).join('')}
        </div>
      `;
    }

    // Call rendering functions
    renderTrendingDecks();
    renderTrendingCards();
    renderEvoCards();

    // OPTIONAL: Weekly update simulation placeholder
    // You could replace this with a real fetch from RoyaleAPI or another source
    function updateWeekly() {
      console.log("ðŸ”„ Weekly data update would be triggered here.");
    }

    // Simulate weekly update (e.g., every 7 days, in practice this would be backend/cron)
    // setInterval(updateWeekly, 7 * 24 * 60 * 60 * 1000); // uncomment in real use
  </script>
</body>
</html>
