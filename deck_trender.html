<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Trending Decks | Clash Royale</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #1a1a1a, #3a3a3a);
      color: #fff;
    }
    nav {
      background-color: #111;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 0 10px #ff6600;
    }
    nav a {
      color: #ff6600;
      margin: 0 1rem;
      text-decoration: none;
      font-weight: bold;
    }
    header {
      text-align: center;
      padding: 4rem 2rem 2rem;
    }
    header h1 {
      font-size: 3rem;
      color: #ff6600;
    }
    .content {
      max-width: 1000px;
      margin: auto;
      padding: 2rem;
    }
    .deck, .trending, .evos {
      background-color: #2c2c2c;
      padding: 1rem;
      margin-bottom: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px #ff6600;
    }
    .deck h3, .trending h3, .evos h3 {
      color: #ff6600;
    }
    .cards {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 1rem;
    }
    .cards img {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      border: 2px solid #ff6600;
      object-fit: cover;
    }
    .meta {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: #ccc;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="#">Trending Decks</a>
  </nav>

  <header>
    <h1>Trending Decks</h1>
    <p>üî• Vote for your favorite decks and explore top cards + evolutions</p>
  </header>

  <div class="content">
    <div id="trendingContainer"></div>
    <div id="trendingCards" class="trending"></div>
    <div id="evoCards" class="evos"></div>
  </div>

  <script>
    // === Trending Decks Data ===
    const trendingDecks = [
      {
        name: "Miner Control",
        cards: ["Miner", "Poison", "Wall Breakers", "Bomb Tower", "Bats", "Log", "Skeletons", "Ice Spirit"],
        bestCards: ["Miner", "Poison"],
        evos: ["Miner", "Wall Breakers"]
      },
      {
        name: "Royal Giant Cycle",
        cards: ["Royal Giant", "Fisherman", "Hunter", "Log", "Skeletons", "Ice Spirit", "Cannon", "Fireball"],
        bestCards: ["Royal Giant", "Hunter"],
        evos: ["Royal Giant"]
      },
      {
        name: "Hog EQ Cycle",
        cards: ["Hog Rider", "Earthquake", "Cannon", "Musketeer", "Ice Spirit", "Skeletons", "Log", "Knight"],
        bestCards: ["Hog Rider", "Earthquake"],
        evos: ["Hog Rider"]
      }
    ];

    // === Helper: Get Image URL ===
    function getCardImage(cardName) {
      const formatted = cardName
        .toLowerCase()
        .replace(/[\s\.']/g, '-')
        .replace(/√©/g, 'e'); // handles "Musketeer" and others
      return `https://royaleapi.github.io/cr-api-assets/cards/${formatted}.png`;
    }

    // === Render Decks ===
    function renderTrendingDecks() {
      const container = document.getElementById('trendingContainer');
      container.innerHTML = '<h3>üî• Best Decks</h3>';

      trendingDecks.forEach(deck => {
        const deckDiv = document.createElement('div');
        deckDiv.className = 'deck';
        deckDiv.innerHTML = `
          <h3>${deck.name}</h3>
          <div class="cards">
            ${deck.cards.map(card => `<img src="${getCardImage(card)}" alt="${card}" title="${card}" />`).join('')}
          </div>
          <div class="meta">Top Cards in This Deck: ${deck.bestCards.join(', ')}</div>
        `;
        container.appendChild(deckDiv);
      });
    }

    // === Render Most Trending Cards ===
    function renderTrendingCards() {
      const cardCount = {};

      trendingDecks.forEach(deck => {
        deck.cards.forEach(card => {
          cardCount[card] = (cardCount[card] || 0) + 1;
        });
      });

      const sorted = Object.entries(cardCount).sort((a, b) => b[1] - a[1]);

      const container = document.getElementById('trendingCards');
      container.innerHTML = `
        <h3>üèÜ Best Cards (Most Used)</h3>
        <div class="cards">
          ${sorted.map(([card, count]) =>
            `<img src="${getCardImage(card)}" alt="${card}" title="${card} - Used in ${count} decks" />`
          ).join('')}
        </div>
      `;
    }

    // === Render Evolution Cards ===
    function renderEvoCards() {
      const evos = new Set();
      trendingDecks.forEach(deck => {
        (deck.evos || []).forEach(card => evos.add(card));
      });

      const container = document.getElementById('evoCards');
      container.innerHTML = `
        <h3>‚ú® Evolution Cards</h3>
        <div class="cards">
          ${Array.from(evos).map(card =>
            `<img src="${getCardImage(card)}" alt="${card}" title="${card} (Evolution)" />`
          ).join('')}
        </div>
      `;
    }

    // === Initialize Rendering ===
    renderTrendingDecks();
    renderTrendingCards();
    renderEvoCards();
  </script>
</body>
</html>
