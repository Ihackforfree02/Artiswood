<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Trending Decks | Clash Royale</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #1a1a1a, #3a3a3a);
      color: #fff;
    }
    nav {
      background-color: #111;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 0 10px #ff6600;
    }
    nav a {
      color: #ff6600;
      margin: 0 1rem;
      text-decoration: none;
      font-weight: bold;
    }
    header {
      text-align: center;
      padding: 4rem 2rem 2rem;
    }
    header h1 {
      font-size: 3rem;
      color: #ff6600;
    }
    .content {
      max-width: 1000px;
      margin: auto;
      padding: 2rem;
    }
    .deck, .trending, .evos, .info {
      background-color: #2c2c2c;
      padding: 1rem;
      margin-bottom: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px #ff6600;
    }
    .deck h3, .trending h3, .evos h3, .info h3 {
      color: #ff6600;
    }
    .cards {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 1rem;
    }
    .card {
      text-align: center;
      width: 80px;
    }
    .card img {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      border: 2px solid #ff6600;
      object-fit: cover;
    }
    .card-name {
      font-size: 0.8rem;
      margin-top: 4px;
    }
    .meta {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: #ccc;
    }
    .info p {
      font-size: 0.9rem;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="#">Trending Decks</a>
  </nav>

  <header>
    <h1>Trending Decks</h1>
    <p>üî• Vote for your favorite decks and explore top cards + evolutions</p>
  </header>

  <div class="content">
    <div id="trendingContainer"></div>
    <div id="trendingCards" class="trending"></div>
    <div id="bestEvos" class="evos"></div>
    <div id="evoInfo" class="info"></div>
  </div>

  <script>
    // === Trending Decks Data ===
    const trendingDecks = [
      {
        name: "Miner Control",
        cards: ["Miner", "Poison", "Wall Breakers", "Bomb Tower", "Bats", "Log", "Skeletons", "Ice Spirit"],
        bestCards: ["Miner", "Poison"],
        evos: ["Miner", "Wall Breakers"]
      },
      {
        name: "Royal Giant Cycle",
        cards: ["Royal Giant", "Fisherman", "Hunter", "Log", "Skeletons", "Ice Spirit", "Cannon", "Fireball"],
        bestCards: ["Royal Giant", "Hunter"],
        evos: ["Royal Giant"]
      },
      {
        name: "Hog EQ Cycle",
        cards: ["Hog Rider", "Earthquake", "Cannon", "Musketeer", "Ice Spirit", "Skeletons", "Log", "Knight"],
        bestCards: ["Hog Rider", "Earthquake"],
        evos: ["Hog Rider"]
      },
      {
        name: "Baby Dragon Splash",
        cards: ["Baby Dragon", "Tornado", "Ice Wizard", "Barbarrel", "Nado", "Knight", "Cage", "Poison"],
        bestCards: ["Baby Dragon", "Tornado"],
        evos: ["Baby Dragon"]
      },
      {
        name: "Vine Trap Control",
        cards: ["Vine", "Poison", "Tornado", "Miner", "Cannon Cart", "Ice Spirit", "Bats", "Skeletons"],
        bestCards: ["Vine", "Miner"],
        evos: ["Vine"]
      }
    ];

    const evoDescriptions = {
      "Miner": "Evolved Miner throws mini TNT on arrival, causing area damage.",
      "Wall Breakers": "Evolved Wall Breakers split into 3 smaller ones on impact.",
      "Royal Giant": "Evolved Royal Giant shoots explosive cannonballs every few shots.",
      "Hog Rider": "Evolved Hog stuns buildings with every fourth hit.",
      "Baby Dragon": "Evolved Baby Dragon leaves burning fire on the ground after hitting.",
      "Vine": "The Vine Card snares and pulls units into its zone, stunning briefly."
    };

    function getCardImage(cardName) {
      const formatted = cardName
        .toLowerCase()
        .replace(/[\s\.']/g, '-')
        .replace(/√©/g, 'e');
      return `https://royaleapi.github.io/cr-api-assets/cards/${formatted}.png`;
    }

    function createCardHTML(cardName) {
      return `
        <div class="card">
          <img src="${getCardImage(cardName)}" alt="${cardName}" title="${cardName}" />
          <div class="card-name">${cardName}</div>
        </div>
      `;
    }

    function renderTrendingDecks() {
      const container = document.getElementById('trendingContainer');
      container.innerHTML = '<h3>üî• Best Decks</h3>';

      trendingDecks.forEach(deck => {
        const deckDiv = document.createElement('div');
        deckDiv.className = 'deck';
        deckDiv.innerHTML = `
          <h3>${deck.name}</h3>
          <div class="cards">
            ${deck.cards.map(card => createCardHTML(card)).join('')}
          </div>
          <div class="meta">Top Cards: ${deck.bestCards.join(', ')}</div>
        `;
        container.appendChild(deckDiv);
      });
    }

    function renderTrendingCards() {
      const cardCount = {};

      trendingDecks.forEach(deck => {
        deck.cards.forEach(card => {
          cardCount[card] = (cardCount[card] || 0) + 1;
        });
      });

      const sorted = Object.entries(cardCount).sort((a, b) => b[1] - a[1]);

      const container = document.getElementById('trendingCards');
      container.innerHTML = '<h3>üèÜ Best Cards (Most Used)</h3><div class="cards">';
      sorted.forEach(([card]) => {
        container.innerHTML += createCardHTML(card);
      });
      container.innerHTML += '</div>';
    }

    function renderBestEvos() {
      const evoMap = new Map();

      trendingDecks.forEach(deck => {
        deck.evos.forEach(card => {
          evoMap.set(card, (evoMap.get(card) || 0) + 1);
        });
      });

      const sorted = [...evoMap.entries()].sort((a, b) => b[1] - a[1]);

      const container = document.getElementById('bestEvos');
      container.innerHTML = '<h3>‚ú® Best Evolution Cards</h3><div class="cards">';
      sorted.forEach(([card]) => {
        container.innerHTML += createCardHTML(card);
      });
      container.innerHTML += '</div>';
    }

    function renderEvoInfo() {
      const container = document.getElementById('evoInfo');
      container.innerHTML = '<h3>üìö Evolution Card Info</h3>';

      for (const [card, desc] of Object.entries(evoDescriptions)) {
        container.innerHTML += `
          <p><strong>${card} Evo:</strong> ${desc}</p>
        `;
      }
    }

    // Render All Sections
    renderTrendingDecks();
    renderTrendingCards();
    renderBestEvos();
    renderEvoInfo();
  </script>
</body>
</html>
